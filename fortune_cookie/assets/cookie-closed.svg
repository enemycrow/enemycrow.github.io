<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="512" height="512">
  <defs>
    <!-- Color tokens -->
    <linearGradient id="cookieFill" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#FAD7A2"/>
      <stop offset="100%" stop-color="#E39C5C"/>
    </linearGradient>
    <linearGradient id="rimShade" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#B86B35"/>
      <stop offset="100%" stop-color="#7D4822"/>
    </linearGradient>
    <radialGradient id="innerSoft" cx="60%" cy="70%" r="70%">
      <stop offset="0%" stop-color="rgba(0,0,0,0)"/>
      <stop offset="100%" stop-color="rgba(0,0,0,0.18)"/>
    </radialGradient>
    <!-- Warm curved glow -->
    <radialGradient id="warmGlow" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#FFF8E6" stop-opacity="0.8"/>
      <stop offset="60%" stop-color="#FFF8E6" stop-opacity="0.35"/>
      <stop offset="100%" stop-color="#FFF8E6" stop-opacity="0"/>
    </radialGradient>

    <style>
      :root {
        --line: #1E120A;
        --eye: #1E120A;
        --blush: #F67C8E;
      }
      #cookieWrap { transform-origin: 256px 256px; }
      #cookieWrap:hover {
        transform: scale(1.04);
        filter: brightness(1.06);
        transition: transform .2s ease, filter .2s ease;
        cursor: pointer;
      }
      .stroke-bold { stroke: var(--line); stroke-width: 10; stroke-linecap: round; stroke-linejoin: round; fill: none; }
      .stroke-med  { stroke: var(--line); stroke-width: 6;  stroke-linecap: round; stroke-linejoin: round; fill: none; }
      .nohit { pointer-events: none; }
      .shadow { opacity:.12; }
    </style>
  </defs>

  <!-- ground shadow -->
  <ellipse class="shadow" cx="260" cy="402" rx="150" ry="26" fill="#000"/>

  <g id="cookieWrap">
    <!-- MAIN COOKIE: crescent body with kawaii lineart -->
    <g id="cookie">
      <!-- body -->
      <path id="bodyFill"
            d="M120,300
               C120,220 190,170 260,170
               C330,170 392,210 400,260
               C404,288 384,314 360,330
               C330,352 282,360 230,356
               C190,352 150,340 130,322
               C122,314 120,308 120,300 Z"
            fill="url(#cookieFill)"/>
      <!-- inner soft depth -->
      <path d="M140,300
               C140,245 198,205 262,205
               C320,205 372,235 378,270
               C382,292 363,312 342,325
               C317,342 279,349 236,346
               C195,343 162,334 148,320
               C142,314 140,308 140,300 Z"
            fill="url(#innerSoft)" opacity=".22"/>
      <!-- bottom rim shade -->
      <path d="M125,302
               C140,328 210,350 288,344
               C332,340 366,326 386,310"
            stroke="url(#rimShade)" stroke-width="16" stroke-linecap="round" fill="none" opacity=".6"/>
      <!-- outer lineart -->
      <path id="bodyLine" class="stroke-bold"
            d="M120,300
               C120,220 190,170 260,170
               C330,170 392,210 400,260
               C404,288 384,314 360,330
               C330,352 282,360 230,356
               C190,352 150,340 130,322
               C122,314 120,308 120,300 Z"/>
    </g>

    <!-- FACE -->
    <g id="face" class="nohit">
      <circle cx="228" cy="262" r="9" fill="var(--eye)"/>
      <circle cx="298" cy="262" r="9" fill="var(--eye)"/>
      <path d="M240 280c10 8 36 8 46 0" class="stroke-med"/>
      <ellipse cx="206" cy="278" rx="14" ry="8" fill="var(--blush)" opacity=".6"/>
      <ellipse cx="320" cy="278" rx="14" ry="8" fill="var(--blush)" opacity=".6"/>
    </g>

    <!-- RIGHT-EDGE CRACK GROUP (integrated into the body) -->
    <g id="edgeCrack" transform="translate(0,0)">
      <!-- tiny slit following the contour; initially closed -->
      <path id="crackLine" d="M392,296 C396,292 398,286 398,276"
            class="stroke-med" stroke-opacity=".55"/>
      <!-- subtle highlight near crack -->
      <path d="M380,280 C386,276 392,274 396,272" class="stroke-med" stroke="#FFDDB6" stroke-opacity=".45"/>
      <!-- animate the 'opening' by translating this group a bit on click -->
      <animateTransform attributeName="transform" type="translate"
                        begin="cookieWrap.click" dur="0.45s"
                        values="0,0; 3,0; 6,2; 5,1"
                        keyTimes="0; .25; .75; 1"
                        keySplines="0.25,0.1,0.25,1; 0.19,1,0.22,1; 0.19,1,0.22,1"
                        calcMode="spline" fill="freeze"/>
    </g>

    <!-- SPARKLE (appears at crack on click) -->
    <g id="sparkle" class="nohit" transform="translate(396,274)" opacity="0">
      <path d="M0 -7 L3 -2 L8 0 L3 2 L0 7 L-3 2 L-8 0 L-3 -2 Z" fill="#FFE9B8" stroke="#F7D18E" stroke-width="1"/>
      <circle cx="0" cy="0" r="2" fill="#FFF2CF"/>
      <animate attributeName="opacity" begin="cookieWrap.click" dur="0.6s" values="0;1;0" keyTimes="0;0.25;1" fill="freeze"/>
      <animateTransform attributeName="transform" type="scale" begin="cookieWrap.click" dur="0.6s" values="0;1.3;0.3" keyTimes="0;0.25;1" fill="freeze"/>
    </g>

    <!-- WARM GLOW (soft, curved, looping) -->
    <g id="glow" opacity=".9" class="nohit">
      <ellipse id="glowEll" cx="-140" cy="120" rx="110" ry="60" fill="url(#warmGlow)" transform="rotate(-25)"/>
      <animateTransform attributeName="transform" type="translate"
                        from="-240 0" to="540 0"
                        dur="5s" repeatCount="indefinite"/>
    </g>
  </g>
</svg>
